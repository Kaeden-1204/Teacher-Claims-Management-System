@model PROG6212_Part2.Models.Claim
@{
    Layout = "_Layout";
}

<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">

            <div class="card shadow-sm" style="background-color:#265D44; border:none;">
                <div class="card-body">

                    <h3 class="mb-3 text-white">Submit Monthly Claim</h3>

                    <form asp-action="SubmitClaim" method="post" enctype="multipart/form-data">
                        <div class="row g-3">

                            <div class="col-12">
                                <label class="text-white">Full Name</label>
                                <input asp-for="FullName" readonly
                                       class="form-control"
                                       style="background-color:#2D6A4F; color:white; border:none;" />
                            </div>

                            <div class="col-12">
                                <label class="text-white">Email</label>
                                <input asp-for="Email" readonly
                                       class="form-control"
                                       style="background-color:#2D6A4F; color:white; border:none;" />
                            </div>

                            <div class="col-12">
                                <label class="text-white">Subject</label>
                                <input asp-for="Subject" class="form-control"
                                       style="background-color:#2D6A4F; color:white; border:none;" />
                                <span asp-validation-for="Subject" class="text-danger"></span>
                            </div>

                            <div class="col-12">
                                <label class="text-white">Hours Worked</label>
                                <input asp-for="HoursWorked" id="HoursWorked"
                                       type="number" min="0" step="0.25"
                                       class="form-control"
                                       style="background-color:#2D6A4F; color:white; border:none;" />
                                <span asp-validation-for="HoursWorked" class="text-danger"></span>
                            </div>

                            <div class="col-12">
                                <label class="text-white">Hourly Rate</label>
                                <input asp-for="HourlyRate" id="HourlyRate" readonly
                                       class="form-control"
                                       style="background-color:#2D6A4F; color:white; border:none;" />
                            </div>

                            <div class="col-12">
                                <label class="text-white">Total Amount (R)</label>
                                <input id="calculatedTotal" readonly
                                       value="@(Model.HoursWorked* Model.HourlyRate)"
                                       class="form-control fw-bold"
                                       style="background-color:#1F5038; color:white; border:none;" />
                            </div>

                            <div class="col-12">
                                <label class="text-white">Notes</label>
                                <textarea asp-for="Notes" rows="3"
                                          class="form-control"
                                          style="background-color:#2D6A4F; color:white; border:none;"></textarea>
                            </div>

                            <div class="col-12">
                                <label class="text-white">Upload Documents</label>

                                <input name="UploadFiles" type="file" multiple
                                       accept=".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png"
                                       class="form-control"
                                       style="background-color:#2D6A4F; color:white; border:none;" />

                                <div class="form-text text-white">
                                    Allowed: PDF, Word, Excel, Images — Max 5MB each
                                </div>
                            </div>

                            <div class="col-12 mt-3 d-flex justify-content-end">
                                <button type="submit" class="btn"
                                        style="background-color:#1B4F3B; color:white;">
                                    Submit Claim
                                </button>
                            </div>

                        </div>
                    </form>

                </div>
            </div>

        </div>
    </div>
</div>

@section Scripts {
    <script>
        const hoursInput = document.getElementById("HoursWorked");
        const rateInput = document.getElementById("HourlyRate");
        const totalDisplay = document.getElementById("calculatedTotal");

        function updateTotal() {
            let hours = parseFloat(hoursInput.value) || 0;
            let rate = parseFloat(rateInput.value) || 0;
            totalDisplay.value = (hours * rate).toFixed(2);
        }

        hoursInput.addEventListener("input", updateTotal);
    </script>

    <partial name="_ValidationScriptsPartial" />
}
